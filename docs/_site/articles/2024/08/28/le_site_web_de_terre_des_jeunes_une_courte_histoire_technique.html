



<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Terre des jeunes</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Inclusion de jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" integrity="sha384-tViUnnbYAV00FLIhhi3v/dWt3Jxw4gZQcNoSCxCIFNJVCx7/D55/wXsrNIRANwdD" crossorigin="anonymous">
  <link href="/css/style.css?token=1749843439" rel="stylesheet">
  <link href="/css/my.css?token=1749843439" rel="stylesheet">
  <script>
    // https://stackoverflow.com/questions/9838812
function loadJSON(path, success, error) {
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function()
  {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      if (xhr.status === 200) {
        if (success)
          success(JSON.parse(xhr.responseText));
      } else {
        if (error)
          error(xhr);
      }
    }
  };
  xhr.open("GET", path, true);
  xhr.send();
}

    class TDJ {
  constructor() {
    this._data = null;
    this._callbacks = [];
  }
  static instance() {
    if (!TDJ._instance) {
      TDJ._instance = new TDJ();
    }
    return TDJ._instance;
  }
  dataAvailable() {
    return this._data !== null;
  }
  init() {
    const that = this;
    loadJSON('/api/v2/all.json',
      function(data) {
        that._data = data;
        that._callbacks.forEach(callback => callback(data));
      },
      function(xhr) {
        console.error(xhr);
      },
    );
  }
  getData(callback) {
    if (this.dataAvailable()) {
      callback(this._data);
    }
    else {
      this._callbacks.push(callback);
    }
  }
}

    TDJ.instance().init();
  </script>
</head>

  <body id="section_1">
    
    <header class="site-header">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-12 d-flex flex-wrap">
        <p class="d-flex me-4 mb-0">
        </p>
        <p class="d-flex mb-0">
        </p>
      </div>
      <div class="col-lg-3 col-12 ms-auto d-lg-block d-none ">
        <ul class="social-icon">
          
            
              <li class="social-icon-item">
                <a href="https://www.linkedin.com/company/terre-des-jeunes" class="social-icon-link bi-linkedin"></a>
              </li>
            
          
            
              <li class="social-icon-item">
                <a href="https://www.facebook.com/groups/terredesjeunes/" class="social-icon-link bi-facebook"></a>
              </li>
            
          
            
          
            
          
            
          
          <li class="social-icon-item">
            <a href="/connexion/">Connexion</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>
<!-- nav dejaaa -->
<nav class="navbar navbar-expand-lg bg-light shadow-lg">
  <div class="container">
    <!-- Logo + Nom -->
    <a class="navbar-brand d-flex align-items-center my-dark-on-light" href="/">
      <img src="/logo/logo-tdj40-vert-outline-blanc-x-800-355.png" class="logo img-fluid me-2" alt="Logo Terre des jeunes 40 ans">
      <h2 class="fw-bold logo">Terre des jeunes</h2>
    </a>
    <!-- Bouton Toggle (pour mobile) -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    <!-- Menu de Navigation -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/40e/">40 ans</a></li>
        <li class="nav-item"><a class="nav-link" href="/a-propos/">À propos</a></li>
        <li class="nav-item"><a class="nav-link click-scroll" href="/#activites">Activités</a></li>
        <li class="nav-item"><a class="nav-link click-scroll" href="/actualites/">Actualités</a></li>

        <li class="nav-item"><a class="nav-link click-scroll" href="/contact/">Contact</a></li>
        <li class="nav-item ms-lg-3">
          <a class="nav-link custom-btn custom-border-btn btn btn-primary" href="/don/">Faire un Don</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

    <main>
      

  
  

<!-- STARTING TEMPLATE section/breadcumb.html-->




<section class="my-nav-breadcrumb pt-3">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-12">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            
              
              
              <li class="breadcrumb-item">
                <a href="/">
                  Accueil
                </a>
              </li>
            
              
              
              <li class="breadcrumb-item my-last-breadcrumb-item">
                <a href="/actualites/">
                  Actualités
                </a>
              </li>
            
          </ol>
        </nav>
      </div>
    </div>
  </div>
</section>


<!-- ENDING TEMPLATE section/breadcumb.html-->




  
  
  
  
  

<!-- STARTING TEMPLATE h1_hero.html-->








<section class="news-detail-header-section text-center" style="background-image: url(/media/screenshot_2024-08-27_at_22.13.58.jpg)">
  <div class="section-overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-12">
        
          <div class="my-h1-hero-supertext">
            <span class="my-header-on-picture-background text-white">
              
      
      

<!-- STARTING TEMPLATE antenne2PaysHtml.html-->






<!-- STARTING TEMPLATE antenne2pays.html-->












<!-- ENDING TEMPLATE antenne2pays.html-->





  <div class="pays-sur-article pays-sur-article-hero">
    <img src="/media/drapeau-monde.png" alt="Drapeau: Mondial" class="img-fluid rounded-circle" style="object-fit: cover;">
    <div class="antenne">Mondial</div>
  </div>




<!-- ENDING TEMPLATE antenne2PaysHtml.html-->



    
            </span>
          </div>
          </div>
        
        <h1 class="text-white">
          <span class="my-header-on-picture-background">
            Le site web de Terre des jeunes, une courte histoire technique
          </span>
        </h1>
      </div>
    </div>
  </div>
</section>


<!-- ENDING TEMPLATE h1_hero.html-->




  

<!-- STARTING TEMPLATE messages.html-->


<section>
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-12 mettre-alertes-ici">
        
      </div>
    </div>
  </div>
</section>


<!-- ENDING TEMPLATE messages.html-->




  
  
  
  
  
  

<!-- STARTING TEMPLATE onlytext_blog.html-->






<section class="news-section section-padding">
  <div class="container">
    <div class="row">
      <div class="col-lg-7 col-12">
        <div class="news-block">
          <div class="news-block-info">
            <div class="d-flex mt-2">
              <div class="news-block-date">
                <p>
                  <i class="bi-calendar4 custom-icon me-1"></i>
                  
    
    


<!-- STARTING TEMPLATE date.html-->











28 août 2024



<!-- ENDING TEMPLATE date.html-->



  
                </p>
              </div>
              
                <div class="news-block-comment mx-5">
                  <p>
                    <i class="bi-flag custom-icon me-1"></i>
                    Mondial
                  </p>
                </div>
              
            </div>
            <div class="news-block-body">
              <h2 id="un-peu-dhistoire">Un peu d’histoire</h2>

<p>Le site web de Terre des jeunes, <a href="https://www.terredesjeunes.org">terredesjeunes.org</a>, était jadis connu sous le nom de Reforestation.net.</p>

<p>Terre des jeunes a acquis le nom de domaine reforestation.net en 2000, et la première version disponible sur archive.org <a href="https://web.archive.org/web/20020105184208/http://www.colba.net/~spin/refnet/">date de 2002</a>.</p>

<p>Les technologies utilisées à travers les années:</p>

<ul>
  <li>HTML</li>
  <li><a href="https://www.joomla.org">Joomla!</a></li>
  <li><a href="https://www.drupal.org">Drupal 6</a></li>
  <li><a href="https://jekyllrb.com">Jekyll</a> avec <a href="https://www.sitecore.com/fr-fr/resources/content-management/headless-cms/what-is-a-headless-cms">architecture headless</a> de type <a href="https://jamstack.org">JamStack</a>.</li>
</ul>

<p>La première version était très simple, sans base de données, mais le site était complexe à modifier car il fallait modifier le code source HTML directement, ce qui ressemble à ceci:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;li&gt;
  &lt;p&gt;&lt;img src="/web/20020105184208im_/http://www.colba.net/~spin/refnet/images/stbar90.jpg" width="90" height="67" align="right" alt="Comité haïtien"&gt;&lt;a href="participez.html"&gt;Comment
    participer&lt;/a&gt;. Terre des jeunes vous intéresse&amp;nbsp;?
    Voulez-vous participer en tant que groupe ou individu&amp;nbsp;?
    Vous désirez participer en nous octroyant un don&amp;nbsp;?&lt;/p&gt;
&lt;/li&gt;
</code></pre></div></div>

<p>Pas très agréable!</p>

<p>Joomla! et Drupal sont des systèmes similaires l’un à l’autre de type dits “CMS LAMP”, ou système de gestion de contenu basé sur Linux, Apache, MySQL et PHP, une famille de systèmes largement utilisés dont fait partie aussi WordPress.</p>

<p>Ces systèmes ont l’avantage d’une interface administrative simple pour gérer le site, toutefois ils requierent un serveur de base de données et un serveur web avec PHP, qui prennent constamment de l’énergie et de la maintenance pour rester actifs et sécuritaires. De plus, ces systèmes sont souvent plus lents et deviennent vite désuets.</p>

<p>En octobre 2022, la version de Drupal que nous utilisions, Drupal 6, était désuète depuis longtemps, ce qui rendait les failles de sécurité et les bris de service plus probables.</p>

<p>Je cherchais une façon de mettre à jour l’architecture du site avec un budget relativement petit de zéro dollars.</p>

<p>J’ai vite écarté l’idée de migrer vers un autre CMS LAMP tel que Drupal 7 ou 8, ou WordPress, car je voulais un système assez simple pour ne pas nécessiter de mises à jour ou un serveur web.</p>

<p>J’ai aussi écarté un site en HTML brut, car trop difficile à mettre à jour.</p>

<p>Une architecture JAMStack marie parfaitement le meilleur du HTML avec le meilleur des CMS LAMP.</p>

<p>Étant donné le peu de budget, je cherchais:</p>

<ul>
  <li>Un hébergement gratuit</li>
  <li>Un système ne nécessitant aucune maintenance</li>
</ul>

<h2 id="passage-à-jamstack-avec-jekyll-et-decap">Passage à JAMStack, avec Jekyll et Decap</h2>

<p>N’ayant pas de budget (en temps ou en argent) pour faire une refonte graphique du site, j’ai “fossilisé” le site Drupal, c’est à dire je l’ai transforé en HTML brut avec un <a href="https://github.com/dcycle/docker-clone-site">clôneur de site</a> sur <a href="https://www.docker.com/#build">Docker</a>.</p>

<p>J’ai ensuite créé un site secondaire basé sur Jekyll avec le CMS <a href="https://decapcms.org">Decap, précédemment connu sous le nom de NetlifyCMS</a>, pour gérer le contenu et produire du JSON qui est ensuite consommé par le site principal.</p>

<p>Par exemple, /api/v1/all.json contient les articles créés après le passage à Jekyll, et un script JavaScript, http://www.terredesjeunes.org/scripts/fetch-new-content.js, consomme ce contenu et l’affiche sur https://www.terredesjeunes.org.</p>

<p>J’en ai même fait une <a href="https://www.youtube.com/watch?v=Loj6AKme5JY">courte vidéo sur YouTube</a>.</p>

<p>Seules certaines pages du site sont mises à jour de cette façon; la majorité des pages de l’ancien site sont archivées et ont une bannière qui indique qu’il est possible qu’elles ne soient plus à jour, par exemmple: https://www.terredesjeunes.org/taxonomy/term/41.html.</p>

<p>Il était important pour moi de conserver l’ensemble des pages de l’ancien site pour éviter de contribuer au <a href="https://fr.wikipedia.org/wiki/Lien_mort">pourrissement des liens</a>, phénomène selon lequel des liens sur le web deviennent inactifs avec le temps. Dans notre cas, ma volonté est que l’ensemble de nos “anciens” liens restent actifs, mais avec un avertissement comme quoi les pages ne sont plus mises à jour. C’est comme l’équivalent d’une archive.</p>

<h2 id="optimisation-des-images">Optimisation des images</h2>

<p>Un des problèmes majeurs suite au passage de Drupal 6 à Jekyll est en lien avec l’optiisation d’images.</p>

<p>Sur Drupal 6, le stockage et l’affichage d’images se faisait de la façon suivante:</p>

<ul>
  <li>L’utilisateur téléverse une image de 5Mo sur le site web.</li>
  <li>Dans le contexte d’un article, Drupal 6 utilisait <a href="https://www.drupal.org/project/imagecache">ImageCache</a> pour transformer l’image originale en image plus légère (souvent autour de 100Ko) pour l’affichage sur le site web, rendant le site web plus rapide.</li>
  <li>Par exemple, <a href="https://www.terredesjeunes.org/sites/terredesjeunes.org/files/imagecache/images_sur_nodes/Screen%20shot%202010-09-08%20at%2011.20.02%20PM_0.png">voici une image au hasard tirée de nos archives</a>. Peu importe la taille originale de l’image, cette version de l’image est très légère. Si vous observez l’URL de l’image, vous verrez qu’elle contient <code class="highlighter-rouge">.../imagecache/images_sur_nodes/...</code>, ce qui indique qu’un “style d’image” nommé <code class="highlighter-rouge">images_sur_nodes</code> a été appliqué à l’image. Ce style d’image génère une version de très petite taille et donc qui se charge rapidement.</li>
</ul>

<p>Le système ImageCache (actuellement nommé Image Styles) est très puissant et utile, mais puisque nous avons décidé de ne pas utiliser Drupal, il nous fallait un autre système.</p>

<p>Concrètement, nous avons cherché une solution qui n’est pas liée à la technologie que nous utilisons, mais qui pourrait être appliquée à n’importe quelle technologie.</p>

<p>Idéalement, nous aimerions que si <code class="highlighter-rouge">/image.jpg</code> fait 5Go, il soit possible de télécharger <code class="highlighter-rouge">/image.jpg?taille=petit</code> (par exemple) pour obtenir une version de l’image qui fait autour de 100ko.</p>

<p>Au départ, nous avons opté pour le système <a href="https://www.thumbor.org/">Thumbor</a>, qui ne fait qu’une seule chose: transformer des images en images plus légères. C’est un système très puissant; et nous en avons fait <a href="https://github.com/dcycle/thumbor-example">une preuve de concept</a>, avant de l’appliquer à notre site web.</p>

<p>Voir l’article <a href="https://web.dev/articles/image-cdns">Use image CDNs to optimize images, sur web.dev, par Jeremy Wagner, Katie Hempenius, et Barry Pollard, le 2019-08-14</a> pour plus de détails techniques.</p>

<p>Voici comment ça fonctionne:</p>

<ul>
  <li>Un serveur d’images, <a href="https://images.terredesjeunes.org">https://images.terredesjeunes.org</a>, héberge des images optimisées, par exemple <a href="https://images.terredesjeunes.org/m8H0yLvvuvCNpKkDv8ylFKTC_mY=/0x160/smart/contenu.terredesjeunes.org/media/whatsapp_image_2024-08-17_at_15.27.40.jpeg">https://images.terredesjeunes.org/m8H0yLvvuvCNpKkDv8ylFKTC_mY=/0x160/smart/contenu.terredesjeunes.org/media/whatsapp_image_2024-08-17_at_15.27.40.jpeg</a>.</li>
  <li>Pour éviter qu’on puisse inonder le serveur avec des requêtes pour des images de toutes sortes de tailles, seules certaines tailles sont possibles, tel que défini par <a href="http://image-mapping.terredesjeunes.org/mapping.json">http://image-mapping.terredesjeunes.org/mapping.json</a>.</li>
  <li>Ce serveur est mis à jour chaque fois que le site web contenu.terredesjeunes.org est mis à jour; ceci est fait par <a href="https://www.jenkins.io">un serveur Jenkins</a>.</li>
</ul>

<h2 id="architecture-20">Architecture 2.0</h2>

<h3 id="le-site-fossilisé">Le site fossilisé</h3>

<p>En octobre 2022, nous avons fossilisé le site web Drupal, que nous hébergeons en code source ouvert sur GitHub au <a href="https://github.com/tdjeunes/website">https://github.com/tdjeunes/website</a>. Nous utilisons ensuite GitHub Pages pour héberger ce site, qui est disponible au <a href="https://www.terredesjeunes.org">https://www.terredesjeunes.org</a>. Par exemple vous y trouverez la page archivée <a href="https://www.terredesjeunes.org/taxonomy/term/41.html">https://www.terredesjeunes.org/taxonomy/term/41.html</a>.</p>

<h3 id="le-nouveau-contenu">Le nouveau contenu</h3>

<p>Un autre site web, basé sur Jekyll et utilisant Decap, est aussi hébergé sur GitHub au <a href="https://github.com/tdjeunes/website-content">https://github.com/tdjeunes/website-content</a> et utilise GitHub Pages. Les membres du réseau Terre des jeunes peuvent utiliser l’interface conviviale de Decap, ou encore le code source directement, pour mettre à jour le contenu qui est ensuite disponible au <a href="https://contenu.terredesjeunes.org">https://contenu.terredesjeunes.org</a>. Par exemple, vous y trouverez la page &lt;/jekyll_blogposts/2024/07/06/projet_jaden_fanm_jardin_des_femmes_a_jean-rabel_haiti.html&gt; dont le code source est au <a href="https://github.com/tdjeunes/website-content/blob/master/docs/jekyll_blogposts/_posts/2024-07-06-projet_jaden_fanm_jardin_des_femmes_a_jean-rabel_haiti.md">https://github.com/tdjeunes/website-content/blob/master/docs/jekyll_blogposts/_posts/2024-07-06-projet_jaden_fanm_jardin_des_femmes_a_jean-rabel_haiti.md</a></p>

<h3 id="la-page-daccueil-du-site-fossilisé-consomme-le-nouveau-contenu">La page d’accueil du site fossilisé consomme le nouveau contenu</h3>

<p>En utilisant un <a href="https://github.com/tdjeunes/website/blob/master/docs/scripts/fetch-new-content.js">script JavaScript</a>, la page d’accueil de l’ancien site consomme pour sa page d’accueil le nouveau contenu.</p>

<h3 id="fonctionalités-autre-que-le-contenu-statique">Fonctionalités autre que le contenu statique</h3>

<p>Lorsque le site web était hébergé sur Drupal, nous utilisions le système pour y héberger des procès verbaux du C.A. non-disponibles au public, ainsi qu’un systèem d’envoi massif par email et un système de formulaires.</p>

<p>Jekyll, GitHub Pages et Decap n’offrent pas cette fonctionalité; ainsi, nous l’avons migré ces fonctions vers des systèmes tiers:</p>

<ul>
  <li><a href="https://mailchimp.com">MailChimp</a> pour l’envoi massif par email;</li>
  <li><a href="https://formspree.io">FormSpree</a> pour les formulaires.</li>
  <li>Des projets GitHub privés pour toute information confidentielle.</li>
</ul>

<h2 id="architecture-30">Architecture 3.0</h2>

<p>Au moment d’écrire ces lignes, une autre mouture du site web est prévue pour un moment futur encore à déterminer.</p>

<p>Les problèmes avec le système actuel sont:</p>

<ul>
  <li>Plusieurs serveurs sont requis pour le fonctionnement du site: terredesjeunes.org, images.terredesjeunes.org, contenu.terredesjeunes.org, et image-mapping.terredesjeunes.org, ainsi qu’un serveur Jenkins.</li>
  <li>Le design du site date d’avant 2010 et n’est pas adapté aux appareils mobiles.</li>
</ul>

<p>L’approche que nous envisageons s’inspire de l’article <a href="https://solar.lowtechmagazine.com/2023/06/rebuilding-a-solar-powered-website/">Rebuilding a Solar Powered Website, par Kris De Decker Marie Otsuka Roel Roscam Abbing Marie Verdeil, le 13 juin 2023, sur Low Tech Magazine</a>, et d’autres approches similaires.</p>

<p>L’architecture simpilfiée aurait les parties suivantes:</p>

<ul>
  <li>Un répertoire git pour le contenu du site web, utilisant Decap pour la gestion du contenu. Ceci serait très similaire à <a href="https://contenu.terredesjeunes.org">https://contenu.terredesjeunes.org</a> et hébergerait Decap mais pas le contenu lui-même. Ce site serait hébergé sur GitHub Pages.</li>
  <li>Notre serveur Jenkins resterait en place, mais aurait comme responsabilité d’emballer et d’optimiser le contenu provenant de <a href="https://contenu.terredesjeunes.org">https://contenu.terredesjeunes.org</a> en un site web statique en HTML brut. (Nous appelons cette phase la phase de “construction” ou, en anglais, “build”.)</li>
  <li>Le site web en HTML brut serait hébergé, lui aussi, sur GitHub pages.</li>
</ul>

<p>Lors de la phase construction, une série de manipulations seraient effectuées pour optimiser le plus possible le site web:</p>

<ul>
  <li>Retrait des commentaires dans le code source</li>
  <li>Retrait des espaces blancs dans le code source</li>
  <li>Aggrégation du CSS et je JavaScript</li>
  <li>Minification du CSS et du JavaScript (ainsi, une fonction JavaScript nommée “maFonction()” deviendrait, par exemple “a32()”, incompréhensible par un être humain mais plus rapide à télécharger)</li>
  <li>Optimisation extrême des images</li>
  <li>Retrait du CSS et du Javascript non-utilisés</li>
</ul>

<p>L’objectif du projet “Architecture 3.0” serait d’implémenter la philosophie “Chaque octet compte” et d’avoir un site web ultra-rapide à charger, avec le moins possible d’appels au serveur et le moins possible de contenu.</p>

<p>L’autre objectif serait de minimiser le nombre de serveurs utilisés. Par exemple, pour le moment, un serveur d’optimisation d’images est toujours en fonction, mais en fait une fois qu’une image est optimisée, elle peut être hébergée de façon statique.</p>

<p>Le prohaine étape, lorsque les ressources seront disponibles, sera de s’entendre parmi la communauté Terre des jeunes sur un gabarit de site qui nous représente et qui est rapide à télécharger et offre un code source le plus simple possible.</p>

            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-4 col-12 mx-auto mt-4 mt-lg-0">
        <div class="tags-block">
          <h5 class="mb-3">Catégories</h5>
          
          
            
            

<!-- STARTING TEMPLATE utilities/facet.html-->













<!-- ENDING TEMPLATE utilities/facet.html-->



          
            
            

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Actions+internes"  data-facet="categories" class="tags-block-link my-category btn my-facet-new-page">
    
    Actions internes <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



          

          <div class="mt-5 my-show-only-if-there-is-a-country">
            <h5 class="mb-3">Pays</h5>

            <div class="my-show-only-these-country-buttons">
              
                

<!-- STARTING TEMPLATE antenne2pays.html-->












<!-- ENDING TEMPLATE antenne2pays.html-->



                <div class="my-show">Mondial</div>
              
            </div>

            
            
              
              
              
              <div class="my-country-button" data-country="Mexique">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Mexique"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/flag_of_mexico_flat_round_corner-256x256.png" alt="Mexique" class="my-facet-drapeau" />
    
    Mexique <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Togo">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Togo"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-togo.png" alt="Togo" class="my-facet-drapeau" />
    
    Togo <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Sénégal">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="S%C3%A9n%C3%A9gal"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-senegal.png" alt="Sénégal" class="my-facet-drapeau" />
    
    Sénégal <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="R. D. Congo">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="R.+D.+Congo"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-rd-congo.png" alt="R. D. Congo" class="my-facet-drapeau" />
    
    R. D. Congo <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Québec">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Qu%C3%A9bec"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-quebec.png" alt="Québec" class="my-facet-drapeau" />
    
    Québec <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Niger">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Niger"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-niger.png" alt="Niger" class="my-facet-drapeau" />
    
    Niger <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Nicaragua">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Nicaragua"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-nicaragua.png" alt="Nicaragua" class="my-facet-drapeau" />
    
    Nicaragua <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Mondial">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Mondial"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-monde.png" alt="Mondial" class="my-facet-drapeau" />
    
    Mondial <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Martinique">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Martinique"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-martinique.png" alt="Martinique" class="my-facet-drapeau" />
    
    Martinique <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Haïti">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Ha%C3%AFti"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-haiti.png" alt="Haïti" class="my-facet-drapeau" />
    
    Haïti <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Grèce">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Gr%C3%A8ce"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-grece.png" alt="Grèce" class="my-facet-drapeau" />
    
    Grèce <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Finlande">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Finlande"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-finlande.png" alt="Finlande" class="my-facet-drapeau" />
    
    Finlande <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Côte d'Ivoire">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="C%C3%B4te+d%27Ivoire"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-cote-ivoire.png" alt="Côte d'Ivoire" class="my-facet-drapeau" />
    
    Côte d'Ivoire <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Colombie">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Colombie"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-colombie.png" alt="Colombie" class="my-facet-drapeau" />
    
    Colombie <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Cameroun">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Cameroun"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-cameroun.png" alt="Cameroun" class="my-facet-drapeau" />
    
    Cameroun <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Burundi">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Burundi"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-burundi.png" alt="Burundi" class="my-facet-drapeau" />
    
    Burundi <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Burkina Faso">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="Burkina+Faso"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-burkina.png" alt="Burkina Faso" class="my-facet-drapeau" />
    
    Burkina Faso <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
              
              
              
              <div class="my-country-button" data-country="Bénin">
                

<!-- STARTING TEMPLATE utilities/facet.html-->











  

  <a href="/actualites/" data-add-category="B%C3%A9nin"  data-facet="pays" class="tags-block-link my-category btn my-facet-new-page">
    
      <img src="/media/drapeau-benin.png" alt="Bénin" class="my-facet-drapeau" />
    
    Bénin <span class="badge">...</span>
  </a>




<!-- ENDING TEMPLATE utilities/facet.html-->



              </div>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- ENDING TEMPLATE onlytext_blog.html-->




  
    </main>
    <!-- footer sections -->
    <!-- footer sections -->
<footer class="site-footer">
  <div class="container">
    <div class="row">
      <!-- Section Logo et Description -->
      <div class="col-lg-4 col-12 mb-4">
        <img src="/images/logo/logotdj_blac.png" class="logo img-fluid" alt="Logo Terre des Jeunes">
        <p class="text-white mt-3">Nous sommes Terre des Jeunes, un organisation sans but lucratif visant à sensibiliser les jeunes du monde entier à la sauvegarde de l'environnement et à la gestion locale ou régionale du patrimoine naturel et culturel, par et pour les jeunes eux-mêmes.</p>
      </div>
      <!-- Section Liens Directs -->
      <div class="col-lg-4 col-md-6 col-12 mb-4">
        <h5 class="site-footer-title mb-3 text-white">Liens Directs</h5>
        <ul class="footer-menu list-unstyled">
          
          <li class="footer-menu-item"><a href="/#activites" class="footer-menu-link text-white">Causes</a></li>
          
          <li class="footer-menu-item"><a href="/a-propos/historique/" class="footer-menu-link text-white">Historique</a></li>
          
          <li class="footer-menu-item"><a href="/mots-du-president/" class="footer-menu-link text-white">Mots du Président</a></li>
          
          <li class="footer-menu-item"><a href="/actualites/" class="footer-menu-link text-white">Actualités</a></li>
          
          <li class="footer-menu-item"><a href="/guide-style/" class="footer-menu-link text-white">Guide de style et logo</a></li>
          
          <li class="footer-menu-item"><a href="/statuts/" class="footer-menu-link text-white">Statuts</a></li>
          
          <li class="footer-menu-item"><a href="/contact/" class="footer-menu-link text-white">Contactez-nous</a></li>
          
          <li class="footer-menu-item"><a href="/admin/status/" class="footer-menu-link text-white">Statut technique</a></li>
          
          <li class="footer-menu-item"><a href="/formations/ressources/" class="footer-menu-link text-white">Ressources pour les formations</a></li>
          
          <li class="footer-menu-item"><a href="/lancer-une-antenne.html" class="footer-menu-link text-white">Lancer une antenne</a></li>
          
          <li class="footer-menu-item"><a href="/archives/" class="footer-menu-link text-white">Archives</a></li>
          
        </ul>
      </div>
      <!-- Section Réseaux Sociaux -->
      <div class="col-lg-4 col-md-6 col-12 mb-4">
        <h5 class="site-footer-title mb-3 text-white">Suivez-nous</h5>
        <ul class="social-icon list-unstyled d-flex justify-content-center">
          
          
          <li class="social-icon-item me-3">
            <a href="https://www.linkedin.com/company/terre-des-jeunes" class="social-icon-link bi-linkedin text-white"></a>
          </li>
          
          
          
          <li class="social-icon-item me-3">
            <a href="https://www.facebook.com/groups/terredesjeunes/" class="social-icon-link bi-facebook text-white"></a>
          </li>
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </div>
  <!-- Footer Bottom -->
  <div class="site-footer-bottom py-3">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center">
          <p class="text-white mb-0">&copy; 2025 Terre des Jeunes. Tous droits réservés. Modifier <a href="https://github.com/alberto56/tdj-comm/edit/main/docs/jekyll_blogposts/_posts/2024-08-28-le_site_web_de_terre_des_jeunes_une_courte_histoire_technique.md">le code source</a> ou <a href="/admin/#/collections/blog/entries/2024-08-28-le_site_web_de_terre_des_jeunes_une_courte_histoire_technique">dans le content manager</a></p>
        </div>
      </div>
    </div>
  </div>
</footer>


<!-- JAVASCRIPT FILES -->
<script src="/js/jquery.sticky.js"></script>
<script src="/js/counter.js"></script>
<script src="/js/custom.js"></script>
<script>
  // we will store the image optmization map file json data in globalMappingData variable. Later we can access
  // globalMappingData in news block to map the news block images.
  let globalMappingData = null;
  const newsContainer = document.getElementById("newsContainer"); // Assurez-vous que l'élément existe
  const recentNewsContainer = document.getElementById("recentNewsContainer");
  const countryList = document.getElementById("countryList");

  function loadDefaultNews(defaultArticles) {
    if (!defaultArticles || defaultArticles.length === 0) {
      $('.my-hide-if-no-articles').hide();
      return;
    }

    const newsContainer = document.getElementById("newsContainer"); // Assurez-vous que l'élément existe

    if (!newsContainer) {
      return;
    }

    newsContainer.innerHTML = ""; // Vider le conteneur avant d'ajouter de nouveaux articles

    // Limiter le nombre d'articles affichés
    const articlesToShow = defaultArticles.slice(0, );

    articlesToShow.forEach(article => {
    const newsBlock = document.createElement("div");
    newsBlock.className = "col-lg- col-md-6 col-sm-12 mb-4";
    newsBlock.setAttribute('data-url-for-filtering', article.url);

    // Tronquer le titre à 50 caractères max
    const truncatedTitle = article.title.length > 60 ? article.title.substring(0, 55) + "..." : article.title;

    let lirePlus = '';
    if (typeof article.url !== 'undefined') {
        lirePlus = `<a href="${article.url}" class="custom-btn btn mt-2">Lire plus</a>`;
    }

    let pays = '';
    if (typeof article.pays !== 'undefined') {
        if (article.pays.drapeau && article.pays.pays && article.pays.antenne) {
            pays = `<div class="pays-sur-article">
                <img src="${article.pays.drapeau}"
                    alt="${article.pays.pays}"
                    class="img-fluid rounded-circle"
                    style="object-fit: cover;">
                <div class="antenne">${article.pays.antenne}</div>
            </div>`;
        }
    }

    if (typeof article.image == "undefined") {
        article.image = "/images/news/medium-shot-volunteers-with-clothing-donations.jpg";
    }

    let imgSrc = article.image;
    if (globalMappingData && imgSrc.startsWith("/media")) {
      // fetch optimized Image Url for news block images.
      const optimizePath = getOptimizedImageUrl(article.image, "604x400", globalMappingData, "https://images.terredesjeunes.org");
      if (optimizePath != "") {
        imgSrc = optimizePath;
      }
    } else {
      // Optional: wait or retry
      console.warn('Global Mapping data not loaded yet.');
    }

    let objPos = "";
    if (article.position == 'top') {
      objPos = "object-position: top;";
    }

    newsBlock.innerHTML = `
        <div class="card shadow-sm mb-4" style="border: none;">
            <div class="card-body text-center">
                ${pays}
                <h5 class="card-title">${truncatedTitle}</h5>
                <div style="width: 100%; height: 200px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                    <img src="${imgSrc}" alt="${article.title}" class="img-fluid rounded" data-optimized-size="800x"
                        style="width: 100%; height: 100%; object-fit: cover; ${objPos}">
                </div>
                ${lirePlus}
            </div>
        </div>
    `;

    newsContainer.appendChild(newsBlock);
    });
  }

  // Récupérer les actualités par pays
  async function fetchNewsByCountry(countryName) {
      try {
          const response = await fetch(`${NEWS_API_URL}?q=${encodeURIComponent(countryName)}&apiKey=${API_KEY}`);
          const data = await response.json();

          if (data.articles?.length) {
              displayNews(data.articles);
          } else {
              newsContainer.innerHTML = `<p>Aucune actualité trouvée pour ${countryName}.</p>`;
          }
      } catch (error) {
          console.error(`Erreur lors de la récupération des actualités pour ${countryName}:`, error);
      }
  }

  // Afficher les actualités dans le conteneur principal
  function displayNews(articles) {
      newsContainer.innerHTML = "";
      articles.forEach(article => {
          const newsBlock = document.createElement("div");
          newsBlock.className = "col-lg-6 col-md-6 col-sm-12 mb-4";
          newsBlock.innerHTML = `
      <div class="news-block"  style:"height:30px">
          <img src="${article.urlToImage || 'C:\Users\rodri\OneDrive\Documents\GitHub\TerreDjeunes\images\news'}" alt="${article.title}" class="img-fluid">
          <h4>${article.title}</h4>
          <p>${article.description || "Pas de description disponible."}</p>
          <a href="${article.url}" class="btn btn-primary read-more" target="_blank"><b>Lire plus</b></a>
      </div>
  `;
          newsContainer.appendChild(newsBlock);
      });
  }

  // Gérer les likes et dislikes
  document.querySelectorAll('.like-icon').forEach(icon => {
              icon.addEventListener('click', function () {
                  let likes = parseInt(this.getAttribute('data-likes')) + 1;
                  this.setAttribute('data-likes', likes);
                  this.nextElementSibling.textContent = likes;
              });
          });

          document.querySelectorAll('.dislike-icon').forEach(icon => {
              icon.addEventListener('click', function () {
                  let dislikes = parseInt(this.getAttribute('data-dislikes')) + 1;
                  this.setAttribute('data-dislikes', dislikes);
                  this.nextElementSibling.textContent = dislikes;
              });
          });
</script>
<!-- sections team -->
<script>
  //   team Terre des jeunes

  const teamMembers = [
  { name: "Alice Dupont", role: "Développeuse", image: "images/members/102.png", bio: "Alice est une développeuse passionnée.", social: { facebook: "#", instagram: "#", linkedin: "#" } },
  { name: "Jean Martin", role: "Designer UX/UI", image: "images/members/membercreat.jpg", bio: "Jean conçoit des expériences utilisateurs.", social: { instagram: "#" } },
  { name: "Marie Curie", role: "Scientifique", image: "images/c.jpg", bio: "Marie est une pionnière de la physique nucléaire.", social: { facebook: "#", linkedin: "#" } },
  { name: "Jacques Leblanc", role: "Manager", image: "images/250.jpg", bio: "Jacques excelle en gestion de projets." },
  ];

  function team_reseaux(member) {
    if (!member.reseaux) {
      return '';
    }
    let ret = '<div class="team-social text-center">';
    member.reseaux.forEach(function(social) {
      ret += `<a class="btn btn-square" href="${social.lien}"><i class="bi bi-${social.type}"></i></a>`;
    });
    return ret + '</div>';
  }

  function populateTeamMembers(teamMembers) {
  const teamContainer = document.getElementById('team-members');  /*mettre-membres-ici */
  if (!teamContainer) {
    return;
  }
  teamContainer.innerHTML = `
          <div class="row row-cols-1 row-cols-md-3 row-cols-lg-6 g-4">
              ${teamMembers.map((member, index) => `
                  <div class="col">
                    <a href="${member.url}">
                      <div class="card text-center shadow-sm" style="cursor: pointer; border: none;" onclick="showModal(${index})">
                          <img src="${member.image}" class="card-img-top rounded-circle mx-auto mt-3" alt="${member.name}"
                            style="width: 120px; height: 120px; object-fit: cover;">
                          <div class="card-body">
                              <h5 class="card-title">${member.name}</h5>
                              <p class="card-text text-muted">${member.role}</p>
                              ${team_reseaux(member)}
                          </div>
                      </div>
                    </a>
                  </div>
              `).join('')}
          </div>
      `;
  }
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
      const navbarToggler = document.querySelector(".navbar-toggler");
      const navLinks = document.querySelectorAll(".nav-link");

      navLinks.forEach(link => {
          link.addEventListener("click", function () {
              if (navbarToggler.getAttribute("aria-expanded") === "true") {
                  navbarToggler.click(); // Fermer le menu après le clic sur un lien
              }
          });
      });
  });
</script>
<script src="/js/contenu/contenu.js?token=1749843439"></script>
<script>
  const services = new Services();
  $( document ).ready(async function() {
    await services.init({
      membres: {
        callback: function(team) {
          populateTeamMembers(team);
        },
      },
      articles: {
        callback: function(news) {
          loadDefaultNews(news);
        },
        not: typeof _notArticlesOfType == "undefined" ? [] : _notArticlesOfType,
        onlyantenne: typeof _onlyArticlesOfAntenne == "undefined" ? [] : _onlyArticlesOfAntenne,
      }
    });
  });
</script>
<script src="/js/image-mapping.js?token=1749843439"></script>
<script>
  // Event listener to execute loadImages function when the page is fully loaded
  window.addEventListener('load', function() {
    loadImages("https://images.terredesjeunes.org", "https://image-mapping.terredesjeunes.org/mapping-beta-tdj-comm.json");
  })
</script>

  </body>
</html>

